<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta http-equiv="Pragma" content="no-cache">

  <title>WebDemo</title>

  <link rel="stylesheet" href="web_demo.css">
</head>

<body>
  <div id="main">
    <div class="header">
      <span>WebDemo</span>
      <img class="close">
    </div>
    <div class="content">
      <p id="user-agent"></p>
    </div>
  </div>
  <script src="jquery.js"></script>
  <script>
    var isMouseUp = true;

    if ("ChangeSize" in window.external) {
      window.external.ChangeSize(900, 550);
    }

    // 获取UserAgent
    $("#user-agent").text(navigator.userAgent);

    $(document).mouseup(function () {
      isMouseUp = true;
    });

    $(document).mousedown(function (e) {
      if (e.target.className !== "header") {
        return;
      }
      isMouseUp = false;
    });

    $(document).mousemove(function (e) {
      if (isMouseUp) {
        return;
      }
      if (e.target.className === "header") {
        console.log('111');
        if ("Move" in window.external) {
          window.external.Move();
        }
      }
    });

    $(".close").click(function () {
      // 点击关闭按钮
      if ("Close" in window.external) {
        window.external.Close();
      }
    });
  </script>
</body>

</html>
